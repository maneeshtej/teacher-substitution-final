import{j as c}from"./index-DcfvNCTE.js";import{b as r}from"./vendor-xatzf0Rc.js";import{u as d}from"./useTeachStore-oF6TMzqJ.js";import"./AnimationManager-CjR2nXLh.js";import{c as g}from"./fetchUtils-DSPvWvVt.js";import{s as v}from"./postUtils-DUnA86lR.js";import{u as k,L as y}from"./App-BarifcCs.js";import"./recentFunctionUtils-DfT13bYP.js";function A(){const f=k(),{setteachersubstitutionstosend:h}=d(),[t,a]=r.useState(d(e=>e.teachersubstitutionstosend)||{}),u=d(e=>e.teacherid),[x,m]=r.useState(null),p=e=>{if(!e){console.error("error : no classItem");return}a(l=>{var s;return{...l,[e]:{...l[e],selected:!((s=l[e])!=null&&s.selected)}}})},b=()=>{a(e=>{var s;const l={...e};for(let o in l)(s=l[o])!=null&&s.selected&&delete l[o];return h(l),l})},j=async()=>{const e=Object.keys(t).filter(s=>{var o;return(o=t[s])==null?void 0:o.selected}).reduce((s,o)=>({...s,[o]:t[o]}),{});if(Object.keys(e).length===0){console.warn("No substitutions selected to send.");return}const l=await v(e);a(s=>{const o={...s};return Object.keys(o).forEach(n=>{var i;(i=o[n])!=null&&i.selected&&delete o[n]}),o}),console.log(l)};return r.useEffect(()=>{console.log(t)},[t]),r.useEffect(()=>{(async()=>{const{data:l,error:s}=await g(u);s&&console.error("error : ",s),m(l)})()},[u]),r.useEffect(()=>{console.log(x)},[x]),c.jsxs("div",{className:"fixed flex flex-col h-[100dvh] w-[100vw] bg-backgroundc text-textc px-[20px]  py-[20px]",children:[c.jsxs("div",{className:"flex flex-row items-center justify-between min-h-[7dvh]",children:[c.jsx("button",{className:"font-extralight cursor-pointer",onClick:()=>{f("/addsubstitution")},children:"Back"}),c.jsx("button",{className:"font-extralight",onClick:()=>{j()},children:"Send"})]}),c.jsx("div",{className:"h-[10dvh] flex items-center pl-[min(6vw,50px)]",children:c.jsx("span",{className:"font-medium text-3xl",children:"Selected Classes"})}),c.jsxs("div",{className:"h-[83dvh] px-[min(12vw,100px)] flex flex-col gap-[20px] overflow-y-scroll",children:[c.jsxs("div",{className:"w-[100%] flex flex-row justify-end gap-[20px] font-light",children:[c.jsx("button",{children:"Draft"}),c.jsx("button",{className:"text-red-300 transition-all duration-200 ease-in-out",style:{color:Object.values(t).some(e=>e.selected)?"red":"rgb(170,170,170)",cursor:Object.values(t).some(e=>e.selected)?"pointer":"default"},onClick:b,disabled:!Object.values(t).some(e=>e.selected),children:"Delete"})]}),t&&Object.keys(t).length>0?Object.keys(t).map((e,l)=>{var s,o;return c.jsx("div",{className:"flex flex-col bg-[rgb(30,30,30)] rounded-[10px] p-[15px] transition-all duration-200 ease-in-out",onClick:()=>p(e),style:{backgroundColor:(s=t[e])!=null&&s.selected?"white":"",color:(o=t[e])!=null&&o.selected?"black":""},children:t[e]&&Object.keys(t[e]).length>0?Object.keys(t[e]).map((n,i)=>c.jsxs("span",{children:[n," : ",t[e][n]]},i)):c.jsx("div",{className:"",children:"No Classes"})},l)}):c.jsx("div",{className:"h-[100%] w-[100%] flex flex-col items-center justify-center",children:c.jsx(y,{to:"/home",children:"Go to home"})})]})]})}export{A as default};
