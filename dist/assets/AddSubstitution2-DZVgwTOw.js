import{j as e}from"./index-DcfvNCTE.js";import{b as o}from"./vendor-xatzf0Rc.js";import{u as f}from"./useTeachStore-oF6TMzqJ.js";import{b as w,c as k}from"./fetchUtils-DSPvWvVt.js";import"./AnimationManager-CjR2nXLh.js";import{C as y}from"./CalenderSelector-C-0TQMd_.js";import{u as S}from"./App-BarifcCs.js";function P(){const c=S(),{setteachersubstitutionstosend:d}=f(),t=f(s=>s.teacherid),[r,x]=o.useState(null),[a,u]=o.useState(null),[n,j]=o.useState(f(s=>s.teachersubstitutionstosend)??{}),[b,p]=o.useState(!1),[v,g]=o.useState(!0),[i,N]=o.useState();return o.useEffect(()=>{const s=async()=>{if(!t){console.error("error : no teacher ID");return}try{const{data:l,error:h}=await w(r??t);if(h){console.error("error : ",h);return}l&&(u(l),g(!1))}catch(l){console.error("error : ",l)}},m=async()=>{const{data:l,error:h}=await k(t);h&&console.error("error : ",h),N(l),console.log(l)};s(),m()},[t,r]),o.useEffect(()=>{},a),o.useEffect(()=>{console.log(n),d(n)},[n]),console.log(t),e.jsxs("div",{className:"fixed flex flex-col h-[100dvh] w-[100vw] bg-backgroundc text-textc px-[20px]  py-[20px]",children:[e.jsx(T,{selectedDatesPopup:b,setSelectedDatesPopup:p,selectedDates:n}),e.jsxs("div",{className:"flex flex-row items-center justify-between min-h-[7dvh]",children:[e.jsx("button",{className:"font-extralight cursor-pointer",onClick:()=>{c("/home"),d(null)},children:"Back"}),e.jsx("button",{className:"font-extralight",onClick:()=>{c("/confirmsubstitution2")},children:"Confirm"})]}),e.jsxs("div",{className:"px-[20px] pb-[20px] flex flex-col w-[100%] h-[93dvh]",children:[e.jsx("div",{className:"h-[4vh]"}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[" ",e.jsxs("select",{onChange:s=>{x(s.target.value)},children:[e.jsx("option",{value:null,children:"None"}),i&&Object.keys(i).length>0?Object.keys(i).map((s,m)=>e.jsx("option",{value:i[s].id,children:i[s].name})):e.jsx("option",{children:"Loading"})]}),e.jsxs("button",{className:"text-[min(5vw,20px)] font-light tracking-wide cursor-pointer",onClick:()=>{p(!0)},children:["Selected Dates :"," ",n&&Object.keys(n).length>=0?Object.keys(n).length:"none"]})]}),e.jsx("div",{className:"h-[4vh]"}),v?e.jsx("div",{className:"h-[80%] w-[100%] bg-[rgb(50,50,50)] animate-pulse rounded-[10px]"}):e.jsx(y,{teacherTimeTable:a,selectedDates:n,setSelectedDates:j,teacherID:r,subTeacherID:t,mode:2})]})]})}function T({selectedDatesPopup:c,setSelectedDatesPopup:d,selectedDates:t}){return e.jsxs("div",{className:"fixed h-[100dvh] w-[100vw] backdrop-blur-lg left-0 top-0 transition-all duration-200 ease-in-out",style:{opacity:c?"1":"0",pointerEvents:c?"all":"none"},children:[e.jsx("div",{className:"h-[10dvh] flex items-center pl-[min(10vw,50px)] ",children:e.jsx("button",{className:"font-light text-lg tracking-wide cursor-pointer",onClick:()=>{d(!1)},children:"Close"})}),e.jsxs("div",{className:"h-[93dvh] px-[min(20vw,100px)] flex flex-col gap-[20px] overflow-scroll",children:[t&&Object.keys(t).length>0?Object.keys(t).map((r,x)=>(console.log(t[r]),e.jsx("div",{className:"flex flex-col border-b-[0.5px]",children:t[r]&&Object.keys(t[r]).length>0?Object.keys(t[r]).map((a,u)=>e.jsxs("span",{children:[a," : ",t[r][a]]},u)):e.jsx("div",{children:"No data"})},x))):e.jsx("div",{children:"No Classes"}),e.jsx("div",{className:"flex h-[50dvh]"})]})]})}export{P as default};
