import{j as e}from"./index-DcfvNCTE.js";import{b as u}from"./vendor-xatzf0Rc.js";import{c as v}from"./fetchUtils-DSPvWvVt.js";import{u as N}from"./useTeachStore-oF6TMzqJ.js";import{updateSubstitutions as C}from"./editAndRemoveUtils-DEH33n1O.js";import{a as S,u as w}from"./App-BarifcCs.js";import"./recentFunctionUtils-DfT13bYP.js";function B(){const x=S(),[t,n]=u.useState(x.state.selectedSubstitutions??null),o=N(a=>a.teacherid),s=w(),[d,p]=u.useState(null),[b,f]=u.useState(!0),j=async()=>{const{data:a,error:l}=await v(o);l&&console.error(l),f(!1),p(a)};u.useEffect(()=>{j()},[o]),u.useEffect(()=>{console.log(t)},[t]);const g=(a,l,i)=>{n(c=>{const m={...c};return m[l][i]=a.target.value,m})};return e.jsxs("div",{className:"h-[100dvh] w-[100%] px-[min(3vw,50px)]",children:[e.jsxs("div",{className:"h-[7dvh] flex items-center justify-between  font-light",children:[e.jsx("button",{onClick:()=>{s("/home")},className:"cursor-pointer",children:"Back"}),e.jsx("button",{onClick:()=>{C(t),s("/success",{state:{data:t}})},children:"Confirm"})]}),e.jsx("div",{className:"h-[10dvh] flex items-center text-3xl font-light",children:"Edit Substitutions"}),e.jsx("div",{className:"px-[min(3vw,50px)] h-[80%] w-[100%] flex flex-col overflow-y-scroll py-[4dvh] gap-[4dvh]",children:t&&Object.keys(t).length>0?Object.keys(t).map((a,l)=>{const i=t[a];return e.jsx("div",{className:`flex flex-col gap-[10px] bg-[rgb(50,50,50)] p-[10px] rounded-[10px] ${b?"animate-pulse":""}`,children:b?e.jsx("div",{className:"h-[10dvh]"}):e.jsx(e.Fragment,{children:Object.keys(i).map((c,m)=>{const r=i[c];return e.jsxs("span",{children:[c," :"," ",c=="state"?e.jsxs("select",{className:"bg-[rgb(70,70,70)] text-sm p-[5px] rounded-[5px]",onChange:h=>{g(h,a,c)},children:[e.jsx("option",{className:"bg-black text-sm",value:r,children:r}),e.jsx("option",{className:"bg-black text-sm",value:"Completed",children:"Completed"}),e.jsx("option",{className:"bg-black text-sm",value:"Cancelled",children:"Cancelled"})]}):c=="reason"?e.jsx("input",{className:"bg-[rgb(70,70,70)] rounded-[5px] text-sm p-[5px]",value:r,onChange:h=>{g(h,a,c)}}):c=="sub_teacher_name"?e.jsx(E,{setTeacherSubstitutions:n,temp:i,temp2:r,teachers:d,key1:a}):r]})})})})}):e.jsx("div",{children:"No Substitutions"})})]})}function E({setTeacherSubstitutions:x,temp2:t,teachers:n,key1:o}){return e.jsxs("select",{onChange:s=>{x(d=>({...d,[o]:{...d[o],sub_teacher_id:n[s.target.value].id,sub_teacher_name:n[s.target.value].name}}))},children:[e.jsx("option",{className:"bg-backgroundc text-textc",value:t,children:t}),n&&Object.keys(n).filter(s=>n[s]!==t).map(s=>e.jsx("option",{className:"bg-backgroundc text-textc",value:s,children:n[s].name},s))]})}export{B as default};
