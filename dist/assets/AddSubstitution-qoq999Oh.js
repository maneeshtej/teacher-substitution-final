import{j as e}from"./index-DcfvNCTE.js";import{b as o}from"./vendor-xatzf0Rc.js";import{u as d}from"./useTeachStore-oF6TMzqJ.js";import{b}from"./fetchUtils-DSPvWvVt.js";import"./AnimationManager-CjR2nXLh.js";import{C as v}from"./CalenderSelector-C-0TQMd_.js";import{u as j}from"./App-BarifcCs.js";function E(){const n=j(),{setteachersubstitutionstosend:i}=d(),t=d(l=>l.teacherid),[r,c]=o.useState(null),[s,x]=o.useState(d(l=>l.teachersubstitutionstosend)??{}),[f,h]=o.useState(!1),[m,p]=o.useState(!0);return o.useEffect(()=>{(async()=>{if(!t){console.error("error : no teacher ID");return}try{const{data:a,error:u}=await b(t);if(u){console.error("error : ",u);return}a&&(c(a),p(!1))}catch(a){console.error("error : ",a)}})()},[t]),o.useEffect(()=>{},r),o.useEffect(()=>{console.log(s),i(s)},[s]),console.log(t),e.jsxs("div",{className:"fixed flex flex-col h-[100dvh] w-[100vw] bg-backgroundc text-textc px-[20px]  py-[20px]",children:[e.jsx(g,{selectedDatesPopup:f,setSelectedDatesPopup:h,selectedDates:s,teacherID:t,mode:1}),e.jsxs("div",{className:"flex flex-row items-center justify-between min-h-[7dvh]",children:[e.jsx("button",{className:"font-extralight cursor-pointer",onClick:()=>{n("/home"),i(null)},children:"Back"}),e.jsx("button",{className:"font-extralight",onClick:()=>{n("/confirmsubstitution")},children:"Confirm"})]}),e.jsxs("div",{className:"px-[20px] pb-[20px] flex flex-col w-[100%] h-[93dvh]",children:[e.jsx("div",{className:"h-[4vh]"}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[" ",e.jsx("span",{className:" text-[min(5vw,20px)] font-light tracking-wide",children:"Add Substitution"}),e.jsxs("button",{className:"text-[min(5vw,20px)] font-light tracking-wide cursor-pointer",onClick:()=>{h(!0)},children:["Selected Dates :"," ",s&&Object.keys(s).length>=0?Object.keys(s).length:"none"]})]}),e.jsx("div",{className:"h-[4vh]"}),m?e.jsx("div",{className:"h-[80%] w-[100%] bg-[rgb(50,50,50)] animate-pulse rounded-[10px]"}):e.jsx(v,{teacherTimeTable:r,selectedDates:s,setSelectedDates:x,teacherID:t})]})]})}function g({selectedDatesPopup:n,setSelectedDatesPopup:i,selectedDates:t}){return e.jsxs("div",{className:"fixed h-[100dvh] w-[100vw] backdrop-blur-lg left-0 top-0 transition-all duration-200 ease-in-out",style:{opacity:n?"1":"0",pointerEvents:n?"all":"none"},children:[e.jsx("div",{className:"h-[10dvh] flex items-center pl-[min(10vw,50px)] ",children:e.jsx("button",{className:"font-light text-lg tracking-wide cursor-pointer",onClick:()=>{i(!1)},children:"Close"})}),e.jsxs("div",{className:"h-[93dvh] px-[min(20vw,100px)] flex flex-col gap-[20px] overflow-scroll",children:[t&&Object.keys(t).length>0?Object.keys(t).map((r,c)=>(console.log(t[r]),e.jsx("div",{className:"flex flex-col border-b-[0.5px]",children:t[r]&&Object.keys(t[r]).length>0?Object.keys(t[r]).map((s,x)=>e.jsxs("span",{children:[s," : ",t[r][s]]},x)):e.jsx("div",{children:"No data"})},c))):e.jsx("div",{children:"No Classes"}),e.jsx("div",{className:"flex h-[50dvh]"})]})]})}export{E as default};
