import{d as H}from"./vendor-xatzf0Rc.js";function R(o,r){let n;try{n=o()}catch{return}return{getItem:i=>{var t;const d=h=>h===null?null:JSON.parse(h,void 0),c=(t=n.getItem(i))!=null?t:null;return c instanceof Promise?c.then(d):d(c)},setItem:(i,t)=>n.setItem(i,JSON.stringify(t,void 0)),removeItem:i=>n.removeItem(i)}}const p=o=>r=>{try{const n=o(r);return n instanceof Promise?n:{then(a){return p(a)(n)},catch(a){return this}}}catch(n){return{then(a){return this},catch(a){return p(a)(n)}}}},w=(o,r)=>(n,a,i)=>{let t={storage:R(()=>localStorage),partialize:e=>e,version:0,merge:(e,v)=>({...v,...e}),...r},d=!1;const c=new Set,h=new Set;let u=t.storage;if(!u)return o((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),n(...e)},a,i);const S=()=>{const e=t.partialize({...a()});return u.setItem(t.name,{state:e,version:t.version})},I=i.setState;i.setState=(e,v)=>{I(e,v),S()};const f=o((...e)=>{n(...e),S()},a,i);i.getInitialState=()=>f;let m;const b=()=>{var e,v;if(!u)return;d=!1,c.forEach(s=>{var l;return s((l=a())!=null?l:f)});const g=((v=t.onRehydrateStorage)==null?void 0:v.call(t,(e=a())!=null?e:f))||void 0;return p(u.getItem.bind(u))(t.name).then(s=>{if(s)if(typeof s.version=="number"&&s.version!==t.version){if(t.migrate){const l=t.migrate(s.state,s.version);return l instanceof Promise?l.then(y=>[!0,y]):[!0,l]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,s.state];return[!1,void 0]}).then(s=>{var l;const[y,_]=s;if(m=t.merge(_,(l=a())!=null?l:f),n(m,!0),y)return S()}).then(()=>{g==null||g(m,void 0),m=a(),d=!0,h.forEach(s=>s(m))}).catch(s=>{g==null||g(void 0,s)})};return i.persist={setOptions:e=>{t={...t,...e},e.storage&&(u=e.storage)},clearStorage:()=>{u==null||u.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>b(),hasHydrated:()=>d,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(h.add(e),()=>{h.delete(e)})},t.skipHydration||b(),m||f},F=w,N=H(F(o=>({teacherid:null,teachername:null,teacherdetails:null,teachersubstitutions:null,teacheremail:null,teachersubstitutionstosend:null,setteacherid:r=>o(()=>({teacherid:r})),setteachername:r=>o(()=>({teachername:r})),setteacherdetails:r=>o(()=>({teacherdetails:r})),setteachersubstitutions:r=>o(()=>({teachersubstitutions:r})),setteacheremail:r=>o(()=>({teacheremail:r})),setteachersubstitutionstosend:r=>o(()=>({teachersubstitutionstosend:r}))}),{name:"teacher-storage",getStorage:()=>localStorage}));export{N as u};
