import{j as t}from"./index-DcfvNCTE.js";import{b as c}from"./vendor-xatzf0Rc.js";import"./useTeachStore-oF6TMzqJ.js";function E({teacherTimeTable:a,setSelectedDates:j,selectedDates:x,teacherID:f,subTeacherID:m,mode:g}){const[i,w]=c.useState([]),[o,u]=c.useState(0),[r,d]=c.useState({index:0,day:null,date:null}),y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=()=>{const e=new Date;e.setDate(e.getDate()+o);const s=[];for(let l=0;l<7;l++){const n=new Date(e);n.setDate(e.getDate()+l),s.push(n.toDateString())}w(s)},v=()=>{u(o+7)},D=()=>{u(o-7)},N=(e,s,l)=>{if(!e||s<0){console.error("error : no Index or Day");return}console.log();const n=new Date(l).toISOString().split("T")[0],S=y.indexOf(e),p={index:s,day:S,date:l,ISODate:n};r!=p&&d(p)},b=e=>{if(!e){console.error("Error: no classItem");return}j(s=>{console.log(r);const l=`${e.class_id}-${r.date}`,n={...s};return n[l]?(delete n[l],console.log("Removed:",n),n):(n[l]={...e,date_of_period:r.ISODate,teacher_id:f,sub_teacher_id:m??null},console.log("Added:",n),n)})};return c.useEffect(()=>{h()},[]),c.useEffect(()=>{h()},[o]),c.useEffect(()=>{},[x]),!f&&g==2?t.jsx("div",{children:"Select a Teacher"}):t.jsx("div",{className:"flex max-h-[100%] w-[100%]",children:i&&i.length>0?t.jsxs("div",{className:"flex flex-col w-[100%] h-[100%]",children:[t.jsxs("div",{className:"flex flex-row w-[100%] h-[80%]",children:[t.jsxs("div",{className:"w-[30%] flex flex-col items-center",children:[t.jsx("span",{className:"py-[10px] flex w-[100%] text-center items-center justify-center bg-[rgb(70,70,70)]",children:"Dates"}),t.jsx("div",{className:"flex flex-col w-[100%] h-[100%] overflow-y-scroll no-scrollbar bg-[rgb(50,50,50)]",children:i.map((e,s)=>t.jsxs("div",{className:"flex min-h-[8dvh] justify-center gap-[10px] items-center cursor-pointer",onClick:()=>{N(e.split(" ")[0],s,e)},style:{backgroundColor:r.index===s?"rgb(70, 70, 70)":""},children:[t.jsx("span",{children:e.split(" ")[2]})," ",t.jsx("span",{children:e.split(" ")[0]})]},s))})]}),t.jsxs("div",{className:"flex flex-col w-[70%]",children:[t.jsx("span",{className:"py-[10px] flex w-[100%] text-center items-center justify-center bg-[rgb(70,70,70)]",children:"Periods"}),t.jsx("div",{className:"h-[100%]",children:a&&a[r.day]&&Object.keys(a).length>0?t.jsx("div",{className:"h-[100%] flex flex-col lg:flex-wrap",children:a[r.day][0].classes.map((e,s)=>t.jsxs("div",{className:"flex-1 lg:flex-2 flex flex-col items-center justify-center cursor-pointer",onClick:()=>{b(e)},style:{backgroundColor:x[`${e.class_id}-${r.date}`]?"rgb(50, 50, 50)":""},children:[t.jsx("span",{className:"text-[10px]",children:e.start_time}),t.jsx("span",{children:e.subject_name})]},s))}):t.jsx("div",{className:"text-white",children:"Select a date"})})]})]}),t.jsxs("div",{className:"flex flex-row items-center justify-between w-[100%] h-[10dvh] font-extralight text-[20px]",children:[t.jsx("button",{onClick:()=>{D(),d(e=>({...e,date:null,day:null}))},children:"Prev"}),t.jsx("button",{onClick:()=>{v(),d(e=>({...e,date:null,day:null}))},children:"Next"})]})]}):t.jsx("div",{className:"flex h-[100%] w-[100%] items-center justify-center",children:"Loading"})})}export{E as C};
